#!/bin/bash
source colors.sh
echo "Using sudo to prove it works
"
echo -e "${red} prove sudo works with ${lpurp}
sudo ls -lah /etc/sudoers.d/${NC}"

sudo ls -lah /etc/sudoers.d/
echo "

SUCCESS
"
read

echo -e "${red}breaking sudo by throwing garbage in the /etc/sudoers.d/ folder"


echo -e "${lpurp}
echo \"gargabe\" | sudo tee /etc/sudoers.d/fail ${NC}"

echo \"gargabe\" | sudo tee /etc/sudoers.d/fail

echo -e "${red} Show sudo is broken${lpurp}
sudo ls -lah /etc/sudoers.d/${yellow}"

sudo ls -lah /etc/sudoers.d/

echo -e "${NC}"

read

echo "
## OH NOES!"
echo "hang on, i fix it.
"

echo -e "${red}Running container container with ${lpurp}"
echo -e "docker run -it -v /etc/sudoers.d/:/data ubuntu rm /data/fail ${NC}"

docker run -it -v /etc/sudoers.d/:/data ubuntu rm /data/fail


echo -e "${red}prove sudo works again with ${lpurp}
sudo ls -lah /etc/sudoers.d/ ${yellow}"
sudo ls -lah /etc/sudoers.d/


echo -e "${NC}
  ##TADA!"
read
